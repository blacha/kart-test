name: Test

on: [push]

jobs:
  clone:
    runs-on: ubuntu-latest 

    container:
      image: ghcr.io/linz/action-kart:v0.1.0

    steps:
    - name: Checkout
      uses: actions/checkout@v4
      with:
        sparse-checkout: |
          /*
          !nz_topo_map_sheet/.table-dataset/feature
          !nz_vineyard_polygons_topo_150k/.table-dataset/feature
        sparse-checkout-cone-mode: false
        fetch-depth: 1

    - name: Kart - Version
      run: |
        kart --version

        ls -alh

    - name: Kart - Clone
      run: |
        kart clone .git kart-working
        kart -C kart-working data ls

    # - name: Check Geopackage
    #   run: |
    #     ls -alh out.gpkg
    
    # - name: Setup Node
    #   uses: actions/setup-node@v4
    #   with:
    #     node-version: '24'

    # - name: Check geopackage
    #   run: 
    #     node index.ts